<!DOCTYPE html>
<html lang="ru" dir="ltr">

<head>
  <meta charset="utf-8">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#000" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="Description" content="Visual novel web game from dalteri">
  <title>Visual Novel</title>
  <style>
    body {
      display: flex;
      height: 100%;
      width: 100%;
      margin:0;
    }
    #loading {
      display: flex;
      position: absolute;
      height: 100%;
      width: 100%;
      z-index: 10;
      background-color: #000;
      align-items: center;
      justify-content: center;
    }
    .logo {
      max-width: 50%;
      height: 50%;
      stroke: white;
    }
    .hidden {
      visibility: hidden!important;
    }
    .collapsed {
      display: none!important;
    }
  </style>
</head>

<body>
  <div id="loading">
    <svg class="logo" viewBox="0 0 12 10.66" stroke-width="0.3" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <defs>
        <path id="t" d="M 1 1 h 10 l -5 8.66 Z" />
        <clipPath id="clip">
          <use href="#t" />
        </clipPath>
      </defs>
      <use href="#t" />
      <g clip-path="url(#clip)">
        <path d="M 1 1 l 10 0" transform="rotate(20,1,1)">
          <animateTransform attributeName="transform" type="rotate" values="0,1,1;60,1,1" dur="1s" repeatCount="indefinite" />
        </path>
        <path d="M 11 1 L 6 9.66" transform="rotate(20,11,1)">
          <animateTransform attributeName="transform" type="rotate" values="0,11,1;60,11,1" dur="1s" repeatCount="indefinite" />
        </path>
        <path d="M 6 9.66 L 1 1" transform="rotate(20,6,9.66)">
          <animateTransform attributeName="transform" type="rotate" values="0,6,9.66;60,6,9.66" dur="1s" repeatCount="indefinite" />
        </path>
      </g>
    </svg>
  </div>
  <nav id="menu" class="collapsed">

    <ul id="mainMenu">
      <li id="newGame" class="interactable" onclick="startNewGame()" tabindex="0">Начать</li>
      <li id="continueGame" class="interactable collapsed" onclick="continueGame()" tabindex="0">Продолжить</li>
      <li id="saveGame" class="interactable collapsed" onclick="openSaveGame()" tabindex="0">Сохранить</li>
      <li id="loadGame" class="interactable" onclick="openLoadGame()" tabindex="0">Загрузить</li>
      <li id="options" class="interactable" onclick="openOptions()" tabindex="0">Настройки</li>
    </ul>

    <ul id="optionsMenu" class="collapsed">
      <li tabindex="0">
        <div class="option">
          <label>Загрузка файлов</label>
          <ul class="optionList">
            <li>
              <label for="fl1" class="interactable">
                <input type="radio" name="fileLoading" id="fl1" class="interactable">
                <span>Заранее</span>
              </label>
            </li>
            <li>
              <label for="fl2" class="interactable">
                <input type="radio" name="fileLoading" id="fl2" class="interactable">
                <span>В момент открытия</span>
              </label>
            </li>
            <li>
              <label for="fl3" class="interactable">
                <input type="radio" name="fileLoading" id="fl3" class="interactable">
                <span>Загрузить всё</span>
              </label>
            </li>
          </ul>
        </div>
      </li>
      <li tabindex="0">
        <div class="option">
          <label for="volume">Громкость</label><br>
          <input type="range" name="volume" min="0" max="100" id="volume" class="interactable">
        </div>
      </li>
      <li tabindex="0">
        <div class="option">
          <label for="textSpeed">Скорость вывода текста</label><br>
          <input type="range" name="textSpeed" min="0" max="100" id="textSpeed" class="interactable">
        </div>
      </li>
      <li tabindex="0">
        <div class="option" id="fullscreenOption" onclick="toggleFullscreen()">
          <label for="fullscreenCheckBox" class="interactable">
            <span>Полный экран</span>
            <label class="switch">
              <input type="checkbox" id="fullscreenCheckBox">
              <span class="slider"></span>
            </label>
          </label>
        </div>
      </li>
      <li>
        <label id="optionsBack" class="interactable" onclick="CloseOptions()">Назад</label>
      </li>
    </ul>
  </nav>
  <main class="view collapsed" id="view"></main>
  <div class="menuBtn collapsed" id="menuBtn" onclick="openMenu()" tabindex="0">
    <div class="bar1"></div>
    <div class="bar2"></div>
    <div class="bar3"></div>
  </div>
  <script>
    let link = document.createElement("link");
    
    link.type = "text/css";
    link.rel = "stylesheet";
    link.href = "index.css";
    
    document.head.appendChild(link);
  </script>
  <script src="index.js"></script>  
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/sw.js')
        .then(function(registration) {
          console.log('Registration successful, scope is:', registration.scope);
        })
        .catch(function(error) {
          console.log('Service worker registration failed, error:', error);
        });
    }
  </script>
</body>

</html>
